{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Application :: - Infomation -- </title>

    <!--Font Import-->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <!--Css Link-->

    <link rel="stylesheet" href="{% static '/Css/info.css' %}">

    <!--Font Awesome Link-->
    <script src="https://kit.fontawesome.com/09e314988c.js" crossorigin="anonymous"></script>


</head>
<body onload="isChecked()" >

    <!--Back-->

    <div class="back" >

        <a href="javascript:history.go(-1)">

            <div class="backBTN">

                <div id="backBTN">
                    <i class="fas fa-solid fa-arrow-left"></i>
                </div>
    
                <span>Back</span>
    
    
            </div>

        </a>
    </div>


    <!--Show state change error-->
    
    {% for message in messages %}

    <div class="stateErr">

        <h5>{{message}}</h5>

    </div>

    {% endfor %}

    <!--personal Info-->
    <div class="psInfo">

        <!--sTATIS will be changing-->
        <h3 id="stateSay" >Pending</h3>

        <div class="psPerson">

            <!--Applicant pic-->
            <div class="psPic">
                <img src="{{appDetail.upload.image_url}}" alt="">
            </div>

            <!--Words-->
            <div class="thePsIn">

                <!--Lable Name-->
                <div class="psNmInf">

                    <span>Name</span>

                    <h3>{{appDetail.application.full_name}}</h3>

                </div>

                <!--Lable Nat Id-->
                <div class="psNmInf">

                    <span>National ID</span>

                    <h3>{{appDetail.application.nat_id}}</h3>

                </div>


                <!--Lable Institute-->
                <div class="psNmInf">

                    <span>Attachment ID</span>

                    <h3>AT{{appDetail.application.nat_id}}</h3>

                </div>


            </div>

        </div>

        <!--setTimeout(checkSubmit, 1000)-->

        <!--status Change Button-->
        <button id="shortlist" class="unchecked" onclick="checkShortList();setTimeout(checkSubmit, 1000)"  >Short List <div class="tick1">
            <i class="fas fa-solid fa-check"></i>
        </div></button>

        <button id="verify" class="unverified" onclick="checkVerified();setTimeout(checkSubmit, 1000)">Verify <div class="tick1">
            <i class="fas fa-solid fa-check-double"></i>
        </div></button>


    </div>

    <!--Information-->

    <div class="extInf">
        <h2>Information</h2>
    </div>


    <!--All Information-->

    <div class="allInf">

        <!--The div infomation-->
        <div class="psInf">

            <h4>Personal Information</h4>

            <div class="scPs">

                <!--Smaill scrolling gender-->
                <div class="exact">

                    <span>Gender</span>
                    <span>:</span>
                    <h3>{{appDetail.application.gender}}</h3>

                </div>

                <!--Smaill scrolling Age-->
                <div class="exact">

                    <span>Age</span>
                    <span>:</span>
                    <h3>{{appDetail.application.age}}</h3>

                </div>

                <!--Smaill scrolling County-->
                <div class="exact">

                    <span>County</span>
                    <span>:</span>
                    <h3>{{appDetail.application.county}}</h3>

                </div>

                <!--Smaill scrolling Date-->
                <div class="exact">

                    <span>Date</span>
                    <span>:</span>
                    <h3>{{appDetail.application.date_register}}</h3>

                </div>

                 <!--Smaill scrolling Phone-->
                 <div class="exact">

                    <span>Phone</span>
                    <span>:</span>
                    <h3>{{appDetail.application.phone}}</h3>

                </div>

                <!--Smaill scrolling Email-->
                <div class="exact">

                    <div class="em">
                        <span>Email</span>
                        <span>:</span>
                        <h3>{{appDetail.application.email}}</h3>
                    </div>

                </div>

                <!--Ujanja-->
                <div class="space"></div>

            </div>

        </div>

        <!--The div infomation-->
        <div class="psInf">

            <h4>Next Of Kin</h4>

            <div class="scPs">

                <!--Smaill scrolling Name-->
                <div class="exact">

                    <span>Name</span>
                    <span>:</span>
                    <h3>{{appDetail.next.kin_name}}</h3>

                </div>

                <!--Smaill scrolling National ID-->
                <div class="exact">

                    <span>National ID</span>
                    <span>:</span>
                    <h3>{{appDetail.next.kin_nat_id}}</h3>

                </div>

                <!--Smaill scrolling Phone-->
                <div class="exact">

                    <span>Phone</span>
                    <span>:</span>
                    <h3>{{appDetail.next.kin_phone}}</h3>

                </div>

                <!--Smaill scrolling Email-->
                <div class="exact">

                    <div class="em">
                        <span>Email</span>
                        <span>:</span>
                        <h3>{{appDetail.next.kin_email}}</h3>
                    </div>

                </div>

                <!--Ujanja-->
                <div class="space"></div>

                
            </div>

        </div>

        <!--The div infomation-->
        <div class="psInf">

            <h4>Higher Education</h4>

            <div class="scPs">

                <!--Smaill scrolling gender-->
                <div class="exact">

                    <span>Institute</span>
                    <span>:</span>
                    <h3>{{appDetail.higher.institution}}</h3>

                </div>

                <!--Smaill scrolling Age-->
                <div class="exact">

                    <span>Course</span>
                    <span>:</span>
                    <h3>{{appDetail.higher.course}}</h3>

                </div>

                <!--Smaill scrolling County-->
                <div class="exact">

                    <span>Level</span>
                    <span>:</span>
                    <h3>{{appDetail.higher.level}}</h3>

                </div>

                <!--Smaill scrolling Date Begin-->
                <div class="exact">

                    <span>Begin</span>
                    <span>:</span>
                    <h3>{{appDetail.higher.uni_start_date}}</h3>

                </div>

                  <!--Smaill scrolling Date End-->
                <div class="exact">

                    <span>End</span>
                    <span>:</span>
                    <h3>{{appDetail.higher.uni_finish_date}}</h3>

                </div>

                <!--Ujanja-->
                <div class="space"></div>

            </div>

        </div>


        <!--Secondary -->
        <!--The div infomation-->
        <div class="psInf">

            <h4>Secondary Education</h4>

            <div class="scPs">

                <!--Smaill scrolling gender-->
                <div class="exact">

                    <span>Institute</span>
                    <span>:</span>
                    <h3>{{appDetail.secondary.institution_high}}</h3>

                </div>


                <!--Smaill scrolling Date Begin-->
                <div class="exact">

                    <span>Begin</span>
                    <span>:</span>
                    <h3>{{appDetail.secondary.sec_start_date}}</h3>

                </div>

                  <!--Smaill scrolling Date End-->
                <div class="exact">

                    <span>End</span>
                    <span>:</span>
                    <h3>{{appDetail.secondary.sec_finish_date}}</h3>

                </div>

                <!--Ujanja-->
                <div class="space"></div>

            </div>

        </div>


        <!--Primary-->

        <!--The div infomation-->
        <div class="psInf">

            <h4>Primary Education</h4>

            <div class="scPs">

                <!--Smaill scrolling gender-->
                <div class="exact">

                    <span>Institute</span>
                    <span>:</span>
                    <h3>{{appDetail.primary.institution_pri}}</h3>

                </div>

                <!--Smaill scrolling Age-->
                <div class="exact">

                    <span>Course</span>
                    <span>:</span>
                    <h3>{{appDetail.primary.start_date}}</h3>

                </div>

                <!--Smaill scrolling County-->
                <div class="exact">

                    <span>Level</span>
                    <span>:</span>
                    <h3>{{appDetail.primary.finish_date}}</h3>

                </div>


                <!--Ujanja-->
                <div class="space"></div>

            </div>

        </div>


    </div>

    <!--All Uploaded Files-->

    <div class="allFiles">

        <div class="allTheFll">

             <!--individual Files-->
            <a href="{{ MEDIA_URL }}{{appDetail.upload.cv_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} Curriculum Vitae</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.upload.gD_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} Good Conduct</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.upload.aP_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} Application Letter</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.upload.sL_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} School Letter</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.upload.personalAcc_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} Personal Accident Cover</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.upload.natID_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} ID Copies</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.secondary.kcse_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} KCSE</span>
                </div>
            </a>

             <!--individual Files-->
             <a href="{{ MEDIA_URL }}{{appDetail.primary.kcpe_file.url}}">
                <div class="theFT">
                    <span>{{appDetail.application.full_name}} KCPE</span>
                </div>
            </a>

        </div>


    </div>

    <!--    <a href="{{ MEDIA_URL }}{{appDetail.upload.cv_file.url}}">Open Cv</a>
-->

    <!--Change User State-->
    <div class="state">
        <form method="post"  >

            {% csrf_token %}

            {{update_state_form}}

            <button type="submit" id="subShort"> Submit </button>
            <script>

                //To check ShortListed

                function checkShortList(){

                    document.getElementById('id_shortlist').click()

                }

                function checkVerified(){

                    document.getElementById('id_verified').click()

                }

                function checkSubmit(){

                    document.getElementById('subShort').click()
                    console.log('timer working')
                    

                }

                

                //Checking If checkbox is checked

                function isChecked(){

                    let checkShortL = document.getElementById('id_shortlist');
                    let checkVerified = document.getElementById('id_verified');
                    let btChangeShort = document.getElementById('shortlist');
                    let btChangeVerify = document.getElementById('verify');
                    let stateSay = document.getElementById('stateSay');

                    if(checkShortL.checked == true && checkVerified.checked == false){

                        //Status Show Value
                        stateSay.innerHTML = 'Short Listed'
                        stateSay.style.color = '#1BBDB3'

    
                        btChangeShort.disabled = true;
                        btChangeShort.style.display = 'none'

                        btChangeVerify.style.display = 'flex'
                        btChangeVerify.disabled = false;

                        console.log('Short Listed')

                    }

                    else if(checkShortL.checked == true && checkVerified.checked == true){

                        stateSay.innerHTML = 'Verified'
                        stateSay.style.color = '#4D5BDD'

                        btChangeShort.disabled = true;
                        btChangeShort.style.display = 'none'

                        btChangeVerify.disabled = true;
                        btChangeVerify.classList.add('checked');
                        btChangeVerify.classList.remove('unverified')

                        console.log('Verified')

                    }

                    else if(checkShortL.checked == false && checkVerified.checked == false){

                        stateSay.innerHTML = 'Pending'
                        stateSay.style.color = '#DD4D4D'

    
                        btChangeShort.disabled = false;
                        btChangeShort.style.display = 'flex'

                        btChangeVerify.style.display = 'none'
                        btChangeVerify.disabled = true;

                        console.log('unverified')

                    }
                    
                }

            </script>

        </form>

        <!--styling the status Button-->

    </div>
    
</body>
</html>